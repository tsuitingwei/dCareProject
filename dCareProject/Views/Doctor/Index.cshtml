
@using dCareProject.Models

@{
    ViewBag.Title = "Index";
    Layout = null;
}

<!DOCTYPE html>
<html>
<title>dCare Doctor System</title>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="~/Content/doctor/js/jquery.js"></script>
    <link href="~/Content/doctor/css/doctor-index.css" rel="stylesheet">
    <link href="~/Content/doctor/css/metro.css" rel="stylesheet">

</head>
<body>
    <div class="container" style="font-family:'微軟正黑體'">

        <!-----------------------bat-->
        <div class="app-bar red">
            <a class="app-bar-element branding" onclick="javascript:location.href='Index';">dCare Doctor</a>
            <span class="app-bar-divider"></span>
            <ul class="app-bar-menu">
                <li><a onclick="javascript:location.href='History';">歷史紀錄</a></li>
            </ul>
            <div class="app-bar-element place-right">
                <ul class="app-bar-menu">
                    <li><a onclick="javascript:location.href='Login';">Logout</a></li>
                </ul>
            </div>
        </div>

        <!--bar-end -->


        
        <!----------------------table-->
        <div class="col-md-8 main">

            <div class="maintabletitle"><h3 style="font-family:'微軟正黑體'">待診列表</h3></div>
            <table class="col-md-8 table table-hover maintable" id="table" style="text-align:center">
                <tr class="active"><td>預約順序</td><td>姓名</td><td>預約時間</td><td>報到狀況</td><td>詳細資料</td></tr>
                 
                @foreach (var row in ViewBag.name)
                 {  
                    
                    <tr><td>@row.id</td><td>@row.name</td><td>@row.time</td>
                    
                 @if ( row.time == new DateTime().Date)
                    {
                        <td id="check" style="color:darkblue">已報到</td>

                    }
                 else
                    {
                        <td id="check"style="color:crimson">未報到</td> 
                    }
                
                    <td><button class="button" onclick="get()">詳細資料</button></td><td class="hide" id="foradress">@row.address</td><td class="hide" id="forsex">@row.gender</td><td class="hide" id="forphone">@row.phone</td></tr> 
                 }
                
            </table>

        </div>
        <!----------------------table end-->
        <!----------------------left-->
        <div class="col-md-4 leftbox">
            <div class="leftboxtitle"><h3 style="font-family:'微軟正黑體'">詳細資料</h3></div>
            <div class="leftboxin">

                <div class="leftboxin-top">
                    <img id="photo" src="~/img/john.jpg" alt="" class="img-rounded" width="100" style="float:left">
                    <address>
                        <b id="name">----</b>
                        <br>
                        性別: <span id="gender" name="性別">----</span><br>
                        出生年月日: <span id="birth" name="出生年月日">----</span><br>
                        電話: <span id="phone" name="電話">----</span><br>
                        地址: <span id="address" name="地址">----</span>
                    </address>

                    <button id="Link" type="button" class="btn btn-success btn-block" onclick="javascript:document.location ='@Url.Action("Link","Doctor")'">視訊通話</button>

                </div>

                <div class="leftboxin-und">
                </div>
            
                </div>
            </div>
        </div>
        <script>




            $(document).ready(function () {
                var name = document.getElementById("table").rows[1].cells[1].innerHTML;
                var adresss = document.getElementById("table").rows[1].cells[5].innerHTML;
                var gender = document.getElementById("table").rows[1].cells[6].innerHTML;
                var phone = document.getElementById("table").rows[1].cells[7].innerHTML;
                document.getElementById("name").innerHTML = name;
                document.getElementById("address").innerHTML = adresss;
                document.getElementById("gender").innerHTML = gender;
                document.getElementById("phone").innerHTML = phone;
                document.getElementById("photo").src = "/img/" + name.trim() + ".jpg";
                var s = document.getElementById("table").rows[1].cells[3].innerHTML;
                if (s == "未報到") {
                    $("#Link").removeClass("btn-success").text("未報到")
                }
                
            })

                

                $(".button").click(function () {
                    var p = $(this).parent().parent().index();
                    var name = document.getElementById("table").rows[p].cells[1].innerHTML;
                    var adresss = document.getElementById("table").rows[p].cells[5].innerHTML;
                    var gender = document.getElementById("table").rows[p].cells[6].innerHTML;
                    var phone = document.getElementById("table").rows[p].cells[7].innerHTML;
                    document.getElementById("name").innerHTML = name;
                    document.getElementById("address").innerHTML = adresss;
                    document.getElementById("gender").innerHTML = gender;
                    document.getElementById("phone").innerHTML = phone;
                    var photoname = name.trim();
                    document.getElementById("photo").src = "/img/" + photoname + ".jpg";

                    var s = document.getElementById("check").innerText
                    if (s == "未報到") {
                        $("#Link").removeClass("btn-success").text("未報到")
                    }



            })

                

               
        </script>
</body>
</html>